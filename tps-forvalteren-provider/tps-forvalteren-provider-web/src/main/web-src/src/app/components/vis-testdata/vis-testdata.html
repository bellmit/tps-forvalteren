<div class="tps-vk-service-rutine-dashboard md-primary md-hue-3" layout="column" layout-padding ng-cloak>

    <!-- Resulting Response -->
    <md-card id="vis-tesdata-main" flex="90" class="tps-vk-top">

        <md-card-content>
        <div layout="row">
        <div flex></div><h1>Endre testdata</h1><div flex></div>
        </div>

        <div layout="row" flex>
            <div flex></div>
            <md-input-container layout="column" class="tps-vk-input-container"
                    aria-label="Opprett ny testperson">
                <md-tooltip>Opprett ny testperson</md-tooltip>
                <md-button class="md-primary md-accent md-raised md-title" ng-click="opprettPersoner()" class="md-accent">Opprett ny testperson</md-button>
                </md-button>
            </md-input-container>
        </div>
        <div layout="row" flex>
            <div id="testdata-velg-alle" ng-show="personer.length > 0">
                <md-input-container class="tps-vk-input-container"
                                    aria-label="Velg alle testpersoner">
                    <md-tooltip>Velg alle testpersoner</md-tooltip>
                    <md-checkbox data-ng-model="allePersoner" ng-click="velgAlle()">
                        <div style="margin-top: -5px;">Velg alle<span ng-if="visEndret"> endrede</span></div>
                    </md-checkbox>
                </md-input-container>
            </div>

            <div ng-show="personer.length > 0" style="margin-top: 3px;">
                <div flex="10"></div>
                <p>Valgt: {{antallValgt}}</p>
            </div>
            <div flex></div>
            <div ng-show="personer.length > 0 && visEndret" style="margin-top: 3px;">
                <p>Endret: {{antallEndret}}</p>
                <div flex="10"></div>
            </div>

            <md-input-container class="tps-vk-input-container">
                <md-tooltip>Slett valgte rader</md-tooltip>
                <md-button class="md-primary md-accent md-raised md-title" ng-click="sletteDialog()" ng-disabled="antallValgt == 0" ng-if="!visEndret && personer.length > 0"
                           aria-label="Slett valgte rader">Slett
                </md-button>
            </md-input-container>
            <md-input-container class="tps-vk-input-container" ng-if="visEndret">
                <md-tooltip>Avbryt valgt rader</md-tooltip>
                <md-button class="md-primary md-accent md-raised md-title" ng-disabled="antallValgt == 0" ng-click="avbryteDialog()"
                           aria-label="Avbryt valgte rader">Avbryt endring
                </md-button>
            </md-input-container>
            <md-input-container class="tps-vk-input-container" ng-if="visEndret">
                <md-tooltip>Lagre valgte rader</md-tooltip>
                <md-button class="md-primary md-accent md-raised md-title" ng-disabled="antallValgt == 0 || !requestForm.$valid" ng-click="lagre()"
                           aria-label="Lagre valgte rader">Lagre
                </md-button>
            </md-input-container>
        </div>
        </md-card-content>
    </md-card>


    <!-- Resulting Response -->

        <form name="requestForm" class="tps-vk-top" style="background-color: transparent;">

        <div ng-repeat="person in personer">
            <div layout="row" flex="100">
            <md-card flex>
                <md-card-content flex class="md-whiteframe-1dp" ng-click="aapneFane($index)" style="padding-bottom: 0; padding-top: 10px;">
                    <div class="tps-vk-form" layout="row" style="font-style: oblique;">
                        <md-checkbox flex="5" class="marker-inntekt-sjekkboks"
                                     ng-model="control[$index].velg"
                                     ng-change="oppdaterValgt($index)"
                                     ng-disabled="control[$index].disabled"
                                     aria-label="Marker person{{person.ident}} for sletting">
                        </md-checkbox>
                        <div flex="15">{{person.ident}} ({{person.identtype}})</div>
                        <div flex="50">
                           {{person.fornavn}} {{person.mellomnavn}} {{person.etternavn}}
                        </div>
                        <div flex="20">{{getKjonn(person.kjonn)}}</div>
                        <div flex></div>
                        <div ng-if="control[$index].endret" style="color: red;">Endret</div>
                        <div flex="5"></div>
                        <div flex="5">
                            <md-button id="cancel" ng-class="{flipped: control[$index].aapen}"
                                       class="md-icon-button"
                                       type="button" style="margin-top: -10px;"
                                       aria-label="Vis testdata detaljer"
                                       ng-click="lukkFane($index)"
                                       ng-disabled="!requestForm.$valid">
                                <md-icon md-svg-icon="assets/icons/keyboard_arrow_down.svg"></md-icon>
                            </md-button>
                        </div>
                    </div>
                    <div layout="row" ng-if="control[$index].aapen">
                        <div class="line">
                            <div layout="row">
                                <md-input-container class="tps-vk-input-container" flex>
                                    <md-tooltip>Fornavn</md-tooltip>
                                    <label>Fornavn</label>
                                    <input name="fornavn" ng-required="true" md-maxlength="50" ng-model="person.fornavn" ng-change="endret($index)"/>
                                    <div ng-messages="requestForm.fornavn.$error">
                                        <div ng-message="required">Verdi er påkrevd</div>
                                        <div ng-message="md-maxlength">Verdi har for mange tegn</div>
                                    </div>
                                </md-input-container>
                                <div flex="5"></div>
                                <md-input-container class="tps-vk-input-container" flex>
                                    <md-tooltip>Mellomnavn</md-tooltip>
                                    <label>Mellomnavn</label>
                                    <input name="mellomnavn" ng-required="false" md-maxlength="50" ng-model="person.mellomnavn" ng-change="endret($index)"/>
                                    <div ng-messages="requestForm.mellomnavn.$error">
                                        <div ng-message="md-maxlength">Verdi har for mange tegn</div>
                                    </div>
                                </md-input-container>
                                <div flex="5"></div>
                                <md-input-container class="tps-vk-input-container" flex>
                                    <md-tooltip>Etternavn</md-tooltip>
                                    <label >Etternavn</label>
                                    <input name="etternavn" ng-required="true" md-maxlength="50" ng-model="person.etternavn" ng-change="endret($index)"/>
                                    <div ng-messages="requestForm.etternavn.$error">
                                        <div ng-message="required">Verdi er påkrevd</div>
                                        <div ng-message="md-maxlength">Verdi har for mange tegn</div>
                                    </div>
                                </md-input-container>
                            </div>
                            <div layout="row">
                                <md-input-container class="tps-vk-datepicker-container" flex>
                                    <md-tooltip>Registeringsdato</md-tooltip>
                                    <label>Regdato</label>
                                    <md-datepicker name="regdato"
                                                   ng-model="person.regdato"
                                                   md-current-view="year"
                                                   ng-change="endret($index)">
                                    </md-datepicker>
                                    <div ng-messages="requestForm.regdato.$error">
                                        <div ng-message="valid">Gyldig datoformat er DD-MM-ÅÅÅÅ</div>
                                    </div>
                                </md-input-container>

                                <md-input-container class="tps-vk-input-container" flex>
                                    <md-tooltip>Statsborgerskap</md-tooltip>
                                    <label>Statsborgerskap</label>
                                    <input name="statsborgerskap" ng-required="false" md-maxlength="3" minlength="3"
                                           ng-model="person.statsborgerskap" ng-change="endret($index)"/>
                                    <div ng-messages="requestForm.statsborgerskap.$error">
                                        <div ng-message="minlength">Verdi har for få tegn</div>
                                        <div ng-message="md-maxlength">Verdi har for mange tegn</div>
                                    </div>
                                </md-input-container>

                                <md-input-container class="tps-vk-input-container" flex>
                                    <md-tooltip>Spesialregister</md-tooltip>
                                    <label>Spesialregister</label>
                                    <md-select ng-model="person.spesreg" class="md-no-underline" ng-change="spesregChanged($index)">
                                        <md-option value=" "> </md-option>
                                        <md-option value="KLIE">Klientadresse</md-option>
                                        <md-option value="MILI">Militær</md-option>
                                        <md-option value="PEND">Pendler</md-option>
                                        <md-option value="SPFO">Sperret adresse, fortrolig</md-option>
                                        <md-option value="SPSF">Sperret adresse, strengt fortrolig</md-option>
                                        <md-option value="SVAL">Svalbard</md-option>
                                        <md-option value="UFB ">Uten fast bopel</md-option>
                                        <md-option value="URIK">I utenrikstjeneste</md-option>
                                        <md-option value="VABO">Vanlig bosatt</md-option>
                                    </md-select>
                                </md-input-container>

                                <md-input-container class="tps-vk-input-container" flex>
                                    <md-tooltip>Spesialregister dato</md-tooltip>
                                    <label>Spesreg. dato</label>
                                    <md-datepicker name="spesregDato"
                                                   md-current-view="year"
                                                   ng-model="person.spesregDato"
                                                   ng-change="endret($index)">
                                    </md-datepicker>
                                    <div ng-messages="requestForm.spesregDato.$error">
                                        <div ng-message="valid">Gyldig datoformat er DD-MM-ÅÅÅÅ</div>
                                    </div>
                                </md-input-container>
                            </div>
                            <div layout="row" class="element">Boadresse - Offentlig adresse</div>
                            <div layout="row">
                                <md-input-container class="tps-vk-input-container" flex>
                                    <md-tooltip>Gatenavn</md-tooltip>
                                    <label>Gatenavn</label>
                                    <input name="boGateadresse" ng-required="false" md-maxlength="50"
                                           ng-model="person.gateadresse[0].boGateadresse" ng-change="endret($index)"/>
                                    <div ng-messages="requestForm.boGateadresse.$error">
                                        <div ng-message="md-maxlength">Verdi har for mange tegn</div>
                                    </div>
                                </md-input-container>

                                <md-input-container class="tps-vk-input-container" flex="10">
                                    <md-tooltip>Husnummer</md-tooltip>
                                    <label>Husnummer</label>
                                    <input name="boHusnummer" ng-required="false" md-maxlength="4"
                                           ng-model="person.gateadresse[0].boHusnummer"
                                           ng-change="endret($index)"/>
                                    <div ng-messages="requestForm.boHusnummer.$error">
                                        <div ng-message="md-maxlength">Verdi har for mange tegn</div>
                                    </div>
                                </md-input-container>

                                <md-input-container class="tps-vk-input-container" flex="10">
                                    <md-tooltip>Gatekode</md-tooltip>
                                    <label>Gatekode</label>
                                    <input name="boGatekode" ng-required="false" md-maxlength="5"
                                           ng-model="person.gateadresse[0].boGatekode"
                                           ng-change="endret($index)"/>
                                    <div ng-messages="requestForm.boGatekode.$error">
                                        <div ng-message="md-maxlength">Verdi har for mange tegn</div>
                                    </div>
                                </md-input-container>

                                <md-input-container class="tps-vk-input-container" flex="10">
                                    <md-tooltip>Postnummer</md-tooltip>
                                    <label>Postnummer</label>
                                    <input name="boPostnummer" pattern="[0-9]*"
                                           md-maxlength="4" minlength="4"
                                           ng-model="person.gateadresse[0].boPostnummer"
                                           ng-change="endret($index)"/>
                                    <div ng-messages="requestForm.boPostnummer.$error" ng-messages-multiple>
                                        <div ng-message="pattern">Ugyldig numerisk verdi</div>
                                        <div ng-message="minlength">Verdi har for få tegn, 4 siffer forventet</div>
                                        <div ng-message="md-maxlength">Verdi har for mange tegn</div>
                                    </div>
                                </md-input-container>

                                <md-input-container class="tps-vk-input-container" flex="20">
                                    <md-tooltip>Flyttedato</md-tooltip>
                                    <label>Flyttedato</label>
                                    <md-datepicker name="boFlytteDato"
                                                   md-current-view="year"
                                                   ng-model="person.gateadresse[0].boFlytteDato"
                                                   ng-change="endret($index)">
                                    </md-datepicker>
                                    <div ng-messages="requestForm.boFlytteDato.$error">
                                        <div ng-message="valid">Gyldig datoformat er DD-MM-ÅÅÅÅ</div>
                                    </div>
                                </md-input-container>

                                <md-input-container class="tps-vk-input-container" flex="10">
                                    <md-tooltip>Kommunenr</md-tooltip>
                                    <label>Kommunenr</label>
                                    <input name="boKommunenr" ng-required="false" pattern="[0-9]*" md-maxlength="4"
                                           minlength="4"
                                           ng-model="person.gateadresse[0].boKommunenr"
                                           ng-change="endret($index)"/>
                                    <div ng-messages="requestForm.boKommunenr.$error" ng-messages-multiple>
                                        <div ng-message="pattern">Ugyldig numerisk verdi</div>
                                        <div ng-message="minlength">Verdi har for få tegn, 4 siffer forventet</div>
                                        <div ng-message="md-maxlength">Verdi har for mange tegn</div>
                                    </div>
                                </md-input-container>
                            </div>
                            <div layout="row" class="element">Postadresse</div>
                            <div layout="row">
                                <md-input-container class="tps-vk-input-container" flex>
                                    <md-tooltip>Adresselinje 1</md-tooltip>
                                    <label>Linje 1</label>
                                    <input name="postLinje1" ng-required="false" md-maxlength="30"
                                           ng-model="person.postadresse[0].postLinje1"
                                           ng-change="endret($index)"/>
                                    <div ng-messages="requestForm.postLinje1.$error">
                                        <div ng-message="md-maxlength">Verdi har for mange tegn</div>
                                    </div>
                                </md-input-container>

                                <md-input-container class="tps-vk-input-container" flex>
                                    <md-tooltip>Adresselinje 2</md-tooltip>
                                    <label>Linje 2</label>
                                    <input name="postLinje2" ng-required="false" md-maxlength="30" ng-model="person.postadresse[0].postLinje2"
                                           ng-change="endret($index)"/>
                                    <div ng-messages="requestForm.postLinje2.$error">
                                        <div ng-message="md-maxlength">Verdi har for mange tegn</div>
                                    </div>
                                </md-input-container>

                                <md-input-container class="tps-vk-input-container" flex>
                                    <md-tooltip>Adresselinje 3</md-tooltip>
                                    <label>Linje 3</label>
                                    <input name="postLinje3" ng-required="false" md-maxlength="30" ng-model="person.postadresse[0].postLinje3"
                                           ng-change="endret($index)"/>
                                    <div ng-messages="requestForm.postLinje3.$error">
                                        <div ng-message="md-maxlength">Verdi har for mange tegn</div>
                                    </div>
                                </md-input-container>

                                <md-input-container class="tps-vk-input-container" flex="5">
                                    <md-tooltip>Land</md-tooltip>
                                    <label>Land</label>
                                    <input name="postLand" ng-required="false" pattern="[0-9]*" md-maxlength="3" minlength="3"
                                           ng-model="person.postadresse[0].postLand"
                                           ng-change="endret($index)"/>
                                    <div ng-messages="requestForm.postLand.$error" ng-messages-multiple>
                                        <div ng-message="pattern">Ugyldig numerisk verdi</div>
                                        <div ng-message="minlength">Verdi har for få tegn, 3 siffer forventet</div>
                                        <div ng-message="md-maxlength">Verdi har for mange tegn, 3 siffer forventet</div>
                                    </div>
                                </md-input-container>
                            </div>
                        </div>
                    </div>
                </md-card-content>
            </md-card>
            </div>
        </div>
        </form>

</div>