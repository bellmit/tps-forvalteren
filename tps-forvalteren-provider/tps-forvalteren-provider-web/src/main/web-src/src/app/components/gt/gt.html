<div class="tps-vk-service-rutine-dashboard" layout="column" class="md-primary md-hue-3" flex layout-padding ng-cloak>

    <div class="tps-vk-top md-whiteframe-z2">
        <h2>Oppslag på Geografisk Tilknytning</h2>
        <form name="requestForm" ng-submit="requestForm.$valid && submit()" layout="row" layout-align="start start" flex="60">
            <tps-input-field flex="40" input-param-name="'fnr'" form-data="formData" select-values=""></tps-input-field>

            <md-input-container flex="40" class="tps-vk-input-container">
                <label>Miljø</label>
                <md-select ng-model="formData.environment" required>
                    <md-option ng-repeat="env in environments" value="{{env}}">{{ env }}</md-option>
                </md-select>
            </md-input-container>

            <md-button align="center" type="submit" class="md-raised md-accent md-ink-ripple tps-vk-submit-btn">
                Finn GT
            </md-button>
        </form>
    </div>
    <div class="tps-vk-top md-whiteframe-z2">
        <form name="responseForm" layout="column" layout-align="start start" flex="60">
            <div ng-if="okStatus">
                <h2>Utledet GT</h2>
                <div layout="row">
                    <tps-output-field flex="40" label="Regel" field-model="gt.bruker.regelForGeografiskTilknytning"></tps-output-field>
                    <span flex="40"></span>
                    <a flex="40" target="_blank" title="Beskrivelse av regler for Geografisk Tilknytning"
                       href="https://confluence.adeo.no/display/FEL/K411GETI+Utlede+Geografisk+Tilknytning">GT regelverk</a>
                </div>
                <div layout="row">
                    <tps-output-field label="Landkode" field-model="gt.bruker.geografiskTilknytning.landkode"></tps-output-field>
                    <tps-output-field label="Kommunennr" field-model="gt.bruker.geografiskTilknytning.kommunenr"></tps-output-field>
                    <tps-output-field flex="40" label="Bydel" field-model="gt.bruker.geografiskTilknytning.bydel"></tps-output-field>
                </div>

                <h2>Person</h2>
                <div layout="row">
                    <tps-output-field label="Personnavn" field-model="gt.personnavn.gjeldendePersonnavn"></tps-output-field>
                </div>
                <div layout="row">
                    <tps-output-field label="ID" field-model="gt.fodselsnummer"></tps-output-field>
                    <tps-output-field label="Identtype" field-model="gt.identType"></tps-output-field>
                </div>
                <div layout="row">
                    <tps-output-field label="Personstatus" field-model="gt.personstatusDetalj.kodePersonstatus"
                                      title="{{gt.personstatusDetalj.kodePersonstatusBeskr}}"></tps-output-field>
                    <tps-output-field label="Spesreg" field-model="gt.bruker.diskresjonDetalj.kodeDiskresjon"
                                      title="{{gt.bruker.diskresjonDetalj.kodeDiskresjonBeskr}}"></tps-output-field>
                </div>
            </div>

            <div ng-if="!okStatus">
                <h2>Status</h2>
                <div layout="column">
                    <tps-output-field label="Kode" field-model="status.kode"></tps-output-field>
                    <tps-output-field label="Melding" field-model="status.melding"></tps-output-field>
                    <tps-output-field label="Utfyllende Melding" field-model="status.utfyllendeMelding"></tps-output-field>
                </div>
            </div>
        </form>
    </div>
</div>